<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Successful - Send a Handyman</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center">
    <div class="max-w-md w-full mx-4">
        <div class="bg-white rounded-lg shadow-lg p-8 text-center">
            <!-- Success Icon -->
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>

            <!-- Success Message -->
            <h1 class="text-2xl font-bold text-gray-900 mb-2">Payment Authorized!</h1>
            <p class="text-gray-600 mb-6">
                Your payment has been authorized and your handyman service has been booked successfully. Funds are held on your card but you will only be charged after your handyman completes the work.
            </p>

            <!-- Quote Details -->
            <div id="quoteDetails" class="bg-gray-50 rounded-lg p-4 mb-6 text-left">
                <h3 class="font-semibold text-gray-900 mb-2">Booking Details:</h3>
                <div id="quoteInfo" class="text-sm text-gray-600">
                    <p>Loading your booking details...</p>
                </div>
            </div>

            <!-- Next Steps -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-left">
                <h3 class="font-semibold text-blue-800 mb-2">What happens next?</h3>
                <ul class="text-sm text-blue-700 space-y-2">
                    <li>1. You will receive a <strong>confirmation email</strong> shortly.</li>
                    <li>2. In most cases within <strong>4 hours</strong>, a handyman will be matched to your service and you will be notified via email.</li>
                    <li>3. Don't see our email? <strong>Check your junk/spam folder.</strong></li>
                </ul>
                <p class="text-sm text-blue-600 mt-3">
                    Questions? Email us at <a href="mailto:info@sendahandyman.com" class="underline font-semibold">info@sendahandyman.com</a>
                </p>
            </div>

            <!-- Action Button -->
            <div class="text-center">
                <button id="homeBtn" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                    Return to Homepage
                </button>
            </div>
        </div>
    </div>

    <script>
        // Get quote token from URL
        const urlParams = new URLSearchParams(window.location.search);
        const quoteToken = urlParams.get('token');

        if (quoteToken) {
            // You could fetch quote details here if needed
            document.getElementById('quoteInfo').innerHTML = `
                <p><strong>Quote Reference:</strong> ${quoteToken.substring(0, 8).toUpperCase()}</p>
                <p><strong>Status:</strong> Payment Authorized (Hold Placed)</p>
                <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
            `;
        } else {
            document.getElementById('quoteDetails').style.display = 'none';
        }

        // Go to homepage function
        function goHome() {
            console.log('Going to homepage');
            window.location.href = '/';
        }

        // Add event listener to home button
        document.addEventListener('DOMContentLoaded', () => {
            const homeBtn = document.getElementById('homeBtn');
            if (homeBtn) {
                homeBtn.addEventListener('click', goHome);
                console.log('Home button listener attached');
            }
        });

        // No auto-redirect - user controls navigation
    </script>
</body>
</html>